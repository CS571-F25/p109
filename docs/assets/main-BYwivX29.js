import{l as B0}from"./index-DzwwfQrc.js";const G=2;function v0({key:n}){switch(c.velocity.x=0,c.velocity.y=0,n){case"w":c.velocity.y=-G,c.direction="up";break;case"a":c.velocity.x=-G,c.direction="left";break;case"s":c.velocity.y=G,c.direction="down";break;case"d":c.velocity.x=G,c.direction="right";break;case"Escape":e0();break}}function F(){window.addEventListener("keydown",v0)}function W(){window.removeEventListener("keydown",v0)}F();const ut=Object.freeze(Object.defineProperty({__proto__:null,enableWASD:F,resetWASD:W},Symbol.toStringTag,{value:"Module"})),U=document.getElementById("startScreen"),O0=document.getElementById("startButton");document.getElementById("playerName");const Z=document.getElementById("gameCanvas")||document.querySelector("canvas"),t0=document.getElementById("endScreen"),R0=document.getElementById("goHomeButton");let q=!1;function $0(){U.style.display="none",Z.style.display="block",t0.style.display="none",J(1),C(),q||(h0(),F(),D0(requestAnimationFrame($)),q=!0)}function e0(){U.style.display="none",Z.style.display="none",t0.style.display="block",C(),W(),q=!1}function _0(){U.style.display="block",Z.style.display="none",t0.style.display="none",h0(),C(),W(),q=!1}O0.addEventListener("click",$0);R0.addEventListener("click",_0);function X0(){C(),W();const n=document.createElement("div");n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.width="100%",n.style.height="100%",n.style.backgroundColor="black",n.style.zIndex="999",document.body.appendChild(n);const i=document.createElement("div");i.innerText="Level Cleared!",i.style.color="yellow",i.style.position="absolute",i.style.font='20px "Press Start 2P", monospace',i.style.top="50%",i.style.left="50%",i.style.transform="translate(-50%, -50%)",i.style.fontSize="40px",i.style.zIndex="1000";const r=document.createElement("p");r.innerText="Press Enter to continue...",r.style.fontSize="20px",r.style.color="white",i.appendChild(r),document.body.appendChild(i);const l=h=>{h.key==="Enter"&&(document.body.removeChild(i),document.body.removeChild(n),J(T),F(),document.removeEventListener("keydown",l))};document.addEventListener("keydown",l)}function G0(){v.fillStyle="white",v.font='20px "Press Start 2P", monospace',v.textAlign="left",v.fillText("SCORE",600,30),v.fillText(A.toString(),600,60)}function T0(){let l=600,h=90;for(let d=0;d<3;d++){const p=d<L?"â¤ï¸":"ðŸ¤";v.fillText(p,l+d*30,h)}}class H0{constructor({spawnPosition:i,position:r,color:l,size:h}){this.spawnPosition=i,this.position=r,this.color=l,this.size=h,this.frightened=!1,this.eaten=!1,this.originalColor=l}draw(i,r){if(!this.eaten){i.beginPath(),i.arc(this.position.x,this.position.y,this.size,Math.PI,0);let y=this.position.x-this.size,x=this.position.x+this.size,f=this.position.y+this.size;i.lineTo(x,f);const w=2,S=.5,_=.002,Q=4;for(let E=x;E>=y;E-=Q){let X=Math.sin(E*S+Date.now()*_)*w;i.lineTo(E,f+X)}i.lineTo(y,f),i.lineTo(y,this.position.y),i.closePath(),i.fillStyle=this.color,i.fill()}i.beginPath(),i.arc(this.position.x-4,this.position.y-2.5,3,0,Math.PI*2),i.arc(this.position.x+4,this.position.y-2.5,3,0,Math.PI*2),i.fillStyle="white",i.fill();let l=r.position.x-this.position.x,h=r.position.y-this.position.y,d=Math.sqrt(l*l+h*h);d!==0&&(l/=d,h/=d);let p=l*1,u=h*1;i.beginPath(),i.arc(this.position.x-4+p,this.position.y-2.5+u,1.5,0,Math.PI*2),i.arc(this.position.x+4+p,this.position.y-2.5+u,1.5,0,Math.PI*2),i.fillStyle="black",i.fill()}}function Y0(){let n=!1,i=null,r=!1;if(m.forEach(l=>{const h=Math.hypot(c.position.x-l.position.x,c.position.y-l.position.y),d=c.radius+l.size*.8;h<d&&(l.frightened==!0?(i=l,r=!0):l.eaten==!1&&(n=!0))}),r){if(!i)return;if(i.frightened&&!i.eaten){const l=[400,800,1600,3200];C0(l[Math.min(K,l.length-1)]),E0(),i.turnEaten()}}else n&&(L0(-1),console.log(`Player lives: ${L}`),setTimeout(()=>{n=!1},1e3),L>0?(w0(),rt()):(w0(),document.getElementById("endScImg").src=B0,e0()))}function S0(n,i,r){const l=Math.floor(i/n),h=Math.floor(r/n),d=Array.from({length:h},()=>Array(l).fill(0));return I.forEach(p=>{const u=Math.floor(p.position.x/n),y=Math.floor(p.position.y/n),x=Math.floor((p.position.x+p.width)/n),f=Math.floor((p.position.y+p.height)/n);for(let w=y;w<f;w++)for(let S=u;S<x;S++)d[w][S]=1}),d}function q0(n,i,r){const l=[{x:0,y:-1},{x:0,y:1},{x:-1,y:0},{x:1,y:0}],h=[[n]],d=new Set;for(d.add(`${n.x},${n.y}`);h.length>0;){const p=h.shift(),{x:u,y}=p[p.length-1];if(u===i.x&&y===i.y)return p;for(let x of l){const f={x:u+x.x,y:y+x.y};f.y>=0&&f.y<r.length&&f.x>=0&&f.x<r[0].length&&r[f.y][f.x]===0&&!d.has(`${f.x},${f.y}`)&&(d.add(`${f.x},${f.y}`),h.push([...p,f]))}}return null}class j extends H0{constructor(i){super(i),this.tileSize=10,this.speed=.2,this.currentDirection={x:0,y:-.05},this.nextDirection=null,this.gridOffset=this.tileSize/2,this.mode="chase",this.scatterTarget=i.scatterTarget,this.wallHitCooldown=0,this.baseSpeed=this.speed,this.spawnTile={x:Math.floor(i.spawnPosition.x/this.tileSize),y:Math.floor(i.spawnPosition.y/this.tileSize)},this.eaten=!1,this.scatterTarget=i.scatterTarget,this.modeStartTime=performance.now(),this.currentModeDuration=()=>this.mode==="chase"?2e4:7e3}update(){const i=performance.now();i-this.modeStartTime>=this.getCurrentModeDuration()&&(this.switchMode(),this.modeStartTime=i);const l=S0(this.tileSize,P.width,P.height),h={x:Math.floor(this.position.x/this.tileSize),y:Math.floor(this.position.y/this.tileSize)};let d;const p={x:Math.floor(c.position.x/this.tileSize),y:Math.floor(c.position.y/this.tileSize)};if(this.eaten)d=this.spawnTile,this.speed=this.baseSpeed*4,h.x===this.spawnTile.x&&h.y===this.spawnTile.y&&(this.eaten=!1,this.frightened=!1,this.speed=this.baseSpeed,this.color=this.originalColor);else if(this.frightened){const w=h.x-p.x,S=h.y-p.y,_=Math.sqrt(w*w+S*S)||1,Q=w/_,E=S/_;let X=!1;for(let z=4;z>=1;z--){const b=Math.round(h.x+Q*z),M=Math.round(h.y+E*z);if(M>=0&&M<l.length&&b>=0&&b<l[0].length&&l[M][b]===0){d={x:b,y:M},X=!0;break}}if(!X){const z=[];for(let b=0;b<l.length;b++)for(let M=0;M<l[0].length;M++)l[b][M]===0&&z.push({x:M,y:b});d=z[Math.floor(Math.random()*z.length)]}}else d=this.getTargetTile?this.getTargetTile():p;if(Math.abs(this.position.x-(h.x*this.tileSize+this.gridOffset))<this.speed*2&&Math.abs(this.position.y-(h.y*this.tileSize+this.gridOffset))<this.speed*2){const w=q0(h,d,l);if(w&&w.length>1){w.shift();const S=w[0];this.nextDirection={x:S.x-h.x,y:S.y-h.y}}this.nextDirection&&(this.currentDirection=this.nextDirection,this.nextDirection=null)}const y=this.position.x+this.currentDirection.x*this.speed,x=this.position.y+this.currentDirection.y*this.speed,f={x:Math.floor(y/this.tileSize),y:Math.floor(x/this.tileSize)};f.y>=0&&f.y<l.length&&f.x>=0&&f.x<l[0].length&&l[f.y][f.x]===0?(this.position.x=y,this.position.y=x):(this.position.x=h.x*this.tileSize+this.gridOffset,this.position.y=h.y*this.tileSize+this.gridOffset)}getCurrentModeDuration(){return this.mode==="chase"?2e4:7e3}switchMode(){this.mode=this.mode==="chase"?"scatter":"chase";try{const i=Math.floor(performance.now());console.log(`Ghost ${this.color} switched to ${this.mode} at ${i}ms`)}catch{console.log(`Mode switched to ${this.mode}`)}}turnFrightened(){this.frightened=!0,this.color="blue",setTimeout(()=>{this.frightened=!1,this.color=this.originalColor},7e3)}turnEaten(){this.eaten=!0,this.frightened=!1}}class i0 extends j{constructor(i){super(i),this.scatterTarget=i.scatterTarget}getTargetTile(){if(this.mode==="scatter")return this.scatterTarget;const i={x:Math.floor(this.position.x/this.tileSize),y:Math.floor(this.position.y/this.tileSize)},r={x:Math.floor(c.position.x/this.tileSize),y:Math.floor(c.position.y/this.tileSize)},l=r.x-i.x,h=r.y-i.y,d=Math.sqrt(l*l+h*h);return this.mode==="chase"&&d<=8?(this.switchMode(),this.scatterTarget):this.mode==="scatter"&&d>10?(this.switchMode(),r):this.mode==="scatter"?this.scatterTarget:r}}class s0 extends j{constructor(i){super(i),this.scatterTarget=i.scatterTarget,this.ambushDistance=4}getTargetTile(){if(this.mode==="scatter")return this.scatterTarget;const i={x:Math.floor(c.position.x/this.tileSize),y:Math.floor(c.position.y/this.tileSize)},r=.1;let l=i.x,h=i.y;return Math.abs(c.velocity.x)>Math.abs(c.velocity.y)?c.velocity.x>r?l+=this.ambushDistance:c.velocity.x<-r&&(l-=this.ambushDistance):c.velocity.y>r?h+=this.ambushDistance:c.velocity.y<-r&&(h-=this.ambushDistance),{x:l,y:h}}}class o0 extends j{constructor(i){super(i),this.scatterTarget=i.scatterTarget}getTargetTile(){if(this.mode==="scatter")return this.scatterTarget;const i=m.find(x=>x.color==="red");if(!i)return this.fallbackTarget();const r=this.getTileCoordinates(c.position),l=this.getTileCoordinates(i.position),{offsetX:h,offsetY:d}=this.getPlayerDirectionOffset(),p={x:r.x+h*2-l.x,y:r.y+d*2-l.y},u=this.getTileCoordinates(this.position);if(Math.abs(this.position.x-(u.x*this.tileSize+this.gridOffset))<this.speed*2&&Math.abs(this.position.y-(u.y*this.tileSize+this.gridOffset))<this.speed*2){const x=S0(this.tileSize,P.width,P.height);if(!x[p.y]||x[p.y][p.x]!==0)return this.fallbackTarget()}return p}getTileCoordinates(i){return{x:Math.floor(i.x/this.tileSize),y:Math.floor(i.y/this.tileSize)}}getPlayerDirectionOffset(){return{offsetX:c.velocity.x>.1?2:c.velocity.x<-.1?-2:0,offsetY:c.velocity.y>.1?2:c.velocity.y<-.1?-2:0}}fallbackTarget(){return this.getTileCoordinates(c.position)}}class R{constructor({position:i,color:r="yellow",radius:l=2.5,points:h=10}){this.position=i,this.color=r,this.radius=l,this.collected=!1,this.points=h}draw(i){this.collected||(i.beginPath(),i.arc(this.position.x,this.position.y,this.radius,0,Math.PI*2),i.fillStyle=this.color,i.fill(),i.closePath())}checkCollision(i){return Math.hypot(i.position.x-this.position.x,i.position.y-this.position.y)<i.radius+this.radius?(this.collected=!0,!0):!1}}class F0 extends R{constructor({position:i,radius:r=5,despawnTime:l=10,points:h=100}){super({position:i,color:"red",radius:r,points:h}),this.spawnTime=Date.now(),this.despawnTimeMs=l*1e3,this.flashStartTime=this.spawnTime+this.despawnTimeMs-2e3,this.collected=!1,setTimeout(()=>{this.collected=!0},this.despawnTimeMs)}draw(i){if(this.collected)return;const r=Date.now();let l=!0;if(r>=this.flashStartTime){const d=r-this.flashStartTime;l=Math.floor(d/300)%2===0}l&&(super.draw(i),i.beginPath(),i.strokeStyle="green",i.lineWidth=2,i.moveTo(this.position.x,this.position.y-this.radius),i.lineTo(this.position.x+2,this.position.y-this.radius-2),i.stroke(),i.closePath(),i.beginPath(),i.arc(this.position.x+2.5,this.position.y-this.radius-3,1.5,0,Math.PI*2),i.fillStyle="green",i.fill(),i.closePath())}}class N extends R{constructor({position:i,radius:r=3}){super({position:i,color:"tan",radius:r,points:200}),this.visible=!0,setInterval(()=>{this.visible=!this.visible},500)}draw(i){!this.collected&&this.visible&&(i.beginPath(),i.arc(this.position.x,this.position.y,this.radius,0,Math.PI*2),i.fillStyle=this.color,i.fill(),i.closePath())}}class V{constructor({position:i,width:r,height:l}){this.position=i,this.width=r,this.height=l}draw(i){i.fillStyle="blue",i.fillRect(this.position.x,this.position.y,this.width,this.height)}}function W0(){for(let n of I){let i=c.position.x+c.velocity.x,r=c.position.y+c.velocity.y;if(O==!0&&(i=c.position.x+c.velocity.x*1.5,r=c.position.y+c.velocity.y*1.5),i+c.radius>=n.position.x&&i-c.radius<=n.position.x+n.width&&r+c.radius>=n.position.y&&r-c.radius<=n.position.y+n.height)return!0}return!1}class n0 extends V{constructor({position:i,width:r,height:l}){super({position:i,width:r,height:l})}draw(i){i.fillStyle="yellow",i.fillRect(this.position.x,this.position.y,this.width,this.height)}}const c0=[[0,0,10,310],[0,0,280,10],[270,0,10,310],[0,300,280,10],[130,230,20,50],[170,270,80,10],[30,270,80,10],[70,230,10,50],[200,230,10,50],[0,240,50,10],[235,240,45,10],[150,200,70,10],[60,200,70,10],[30,200,10,20],[240,200,10,20],[170,200,10,50],[100,200,10,50],[30,170,220,10],[100,130,32,10],[170,140,10,40],[100,140,10,40],[148,130,32,10],[0,140,80,10],[200,140,80,10],[0,110,50,10],[230,110,50,10],[70,80,10,40],[30,80,20,40],[230,80,20,40],[200,80,10,40],[100,40,10,70],[170,40,10,70],[130,30,20,80],[170,0,10,20],[100,0,10,20],[0,50,40,10],[240,50,40,10],[30,30,10,30],[60,0,20,30],[200,0,20,30],[240,30,10,30],[60,50,20,10],[200,50,20,10]];class l0 extends j{constructor(i){super(i)}getTargetTile(){return{x:Math.floor(c.position.x/this.tileSize),y:Math.floor(c.position.y/this.tileSize)}}}const a=280,d0=[[20,40],[90,260],[a-20,40],[a-90,260]],p0=[[20,20],[35,20],[50,20],[50,40],[63.5,40],[76.5,40],[90,40],[90,20],[105,30],[120,20],[133.5,20],[20,100],[20,85],[20,70],[35,70],[50,70],[63.5,70],[76.5,70],[90,70],[50,55],[90,55],[20,130],[35,130],[50,130],[63.5,130],[76.5,130],[90,130],[60,115],[60,100],[60,85],[90,115],[90,100],[90,85],[105,120],[120,120],[133.5,120],[120,100],[120,80],[120,60],[120,40],[90,145],[20,160],[35,160],[50,160],[63.5,160],[76.5,160],[90,160],[20,175],[20,190],[70,190],[90,190],[110,190],[20,210],[20,230],[35,190],[35,230],[50,190],[50,210],[50,230],[70,220],[90,220],[90,240],[105,260],[60,240],[60,260],[40,260],[20,260],[20,275],[20,290],[40,290],[60,290],[80,290],[100,290],[120,290],[120,275],[120,260],[120,240],[120,220],[140,290],[140,220],[140,205],[a-20,20],[a-35,20],[a-50,20],[a-50,40],[a-63.5,40],[a-76.5,40],[a-90,40],[a-90,20],[a-105,30],[a-120,20],[a-133.5,20],[a-20,85],[a-20,70],[a-35,70],[a-50,70],[a-63.5,70],[a-76.5,70],[a-90,70],[a-50,55],[a-90,55],[a-20,130],[a-35,130],[a-50,130],[a-63.5,130],[a-76.5,130],[a-90,130],[a-60,115],[a-60,100],[a-60,85],[a-90,115],[a-90,100],[a-90,85],[a-105,120],[a-120,120],[a-133.5,120],[a-120,100],[a-120,80],[a-120,60],[a-120,40],[a-90,145],[a-20,160],[a-35,160],[a-50,160],[a-63.5,160],[a-76.5,160],[a-90,160],[a-20,175],[a-20,190],[a-70,190],[a-90,190],[a-110,190],[a-20,210],[a-20,230],[a-35,190],[a-35,230],[a-50,190],[a-50,210],[a-50,230],[a-70,220],[a-90,220],[a-90,240],[a-105,260],[a-60,240],[a-60,260],[a-40,260],[a-20,260],[a-20,275],[a-20,290],[a-40,290],[a-60,290],[a-80,290],[a-100,290],[a-120,290],[a-120,275],[a-120,260],[a-120,240],[a-120,220]],j0={left:0,right:270};function P0(){const n=[];for(let i=0;i<c0.length;i++){const[r,l,h,d]=c0[i];n.push(new V({position:{x:r,y:l},width:h,height:d}))}return n.push(new n0({position:{x:130,y:133},width:20,height:5})),n}function b0(){const n=[];for(let i=0;i<d0.length;i++){const[r,l]=d0[i];n.push(new N({position:{x:r,y:l}}))}for(let i=0;i<p0.length;i++){const[r,l]=p0[i];n.push(new R({position:{x:r,y:l}}))}return n}function r0(){const n=[],r=["red","pink","cyan","orange"];for(let p=0;p<4;p++){const u=(12+p)*10+5,y=160+10/2;p===0?n.push(new l0({spawnPosition:{x:u,y},position:{x:u,y},color:r[p],size:7.5})):p===1?n.push(new s0({spawnPosition:{x:u,y},position:{x:u,y},color:r[p],size:7.5,scatterTarget:{x:26,y:2}})):p===2?n.push(new o0({spawnPosition:{x:u,y},position:{x:u,y},color:r[p],size:7.5,scatterTarget:{x:26,y:29}})):p===3&&n.push(new i0({spawnPosition:{x:u,y},position:{x:u,y},color:r[p],size:7.5,scatterTarget:{x:2,y:29}}))}return n}function M0(){return new a0({position:{x:140,y:190},velocity:{x:0,y:0}})}const N0={x:140,y:190},V0={x:260,y:100},y0=[[0,0,420,10],[410,350,10,120],[0,140,10,190],[410,140,10,190],[0,0,10,120],[0,350,10,120],[0,460,420,10],[410,0,10,120],[30,0,10,90],[30,110,80,10],[60,30,10,90],[90,0,20,90],[380,0,10,90],[310,110,80,10],[350,30,10,90],[310,0,20,90],[130,30,160,10],[130,30,20,90],[270,30,20,90],[200,30,20,130],[170,60,80,10],[140,90,40,10],[240,90,40,10],[170,120,80,20],[170,160,80,30],[10,140,140,10],[140,140,10,50],[140,210,10,50],[140,280,10,50],[10,320,140,10],[70,140,10,80],[70,240,10,80],[30,170,20,130],[100,170,20,130],[170,220,10,40],[170,210,32,10],[218,210,32,10],[170,250,80,10],[240,220,10,40],[270,140,140,10],[270,140,10,50],[270,210,10,50],[270,280,10,50],[270,320,140,10],[340,140,10,80],[340,240,10,80],[300,170,20,130],[370,170,20,130],[30,380,10,90],[30,350,80,10],[60,350,10,90],[90,380,20,90],[380,380,10,90],[310,350,80,10],[350,350,10,90],[310,380,20,90],[130,430,160,10],[130,350,20,90],[270,350,20,90],[200,310,20,130],[170,400,80,10],[140,370,40,10],[240,370,40,10],[170,330,80,20],[170,280,80,30]],s=420,o=470,u0=[[20,20],[20,235],[s-20,20],[s-20,235],[20,o-20],[s-20,o-20]],f0=[[20,40],[20,60],[20,80],[20,100],[20,115],[20,130],[40,130],[60,130],[80,130],[100,130],[120,130],[140,130],[160,130],[35,100],[50,100],[50,80],[50,60],[50,40],[50,20],[65,20],[80,20],[80,20],[80,40],[80,60],[80,80],[80,100],[100,100],[120,100],[120,115],[120,80],[120,60],[120,40],[120,20],[140,20],[160,20],[180,20],[200,20],[160,110],[175,110],[190,110],[190,95],[190,80],[175,80],[160,80],[160,65],[160,50],[175,50],[160,150],[160,175],[160,200],[160,222.5],[175,150],[190,150],[180,200],[200,200],[145,200],[130,200],[130,220],[130,180],[130,160],[110,160],[90,160],[90,180],[90,200],[90,220],[60,220],[60,200],[60,180],[60,160],[40,160],[20,160],[20,180],[20,200],[20,220],[75,230],[s-20,40],[s-20,60],[s-20,80],[s-20,100],[s-20,115],[s-20,130],[s-40,130],[s-60,130],[s-80,130],[s-100,130],[s-120,130],[s-140,130],[s-160,130],[s-35,100],[s-50,100],[s-50,80],[s-50,60],[s-50,40],[s-50,20],[s-65,20],[s-80,20],[s-80,20],[s-80,40],[s-80,60],[s-80,80],[s-80,100],[s-100,100],[s-120,100],[s-120,115],[s-120,80],[s-120,60],[s-120,40],[s-120,20],[s-140,20],[s-160,20],[s-180,20],[s-200,20],[s-160,110],[s-175,110],[s-190,110],[s-190,95],[s-190,80],[s-175,80],[s-160,80],[s-160,65],[s-160,50],[s-175,50],[s-190,50],[s-160,150],[s-160,175],[s-160,200],[s-160,222.5],[s-175,150],[s-190,150],[s-180,200],[s-200,200],[s-145,200],[s-130,200],[s-130,220],[s-130,180],[s-130,160],[s-110,160],[s-90,160],[s-90,180],[s-90,200],[s-90,220],[s-60,220],[s-60,200],[s-60,180],[s-60,160],[s-40,160],[s-20,160],[s-20,180],[s-20,200],[s-20,220],[s-75,230],[20,o-40],[20,o-60],[20,o-80],[20,o-100],[20,o-115],[20,o-130],[40,o-130],[60,o-130],[80,o-130],[100,o-130],[120,o-130],[140,o-130],[160,o-130],[35,o-100],[50,o-100],[50,o-80],[50,o-60],[50,o-40],[50,o-20],[65,o-20],[80,o-20],[80,o-20],[80,o-40],[80,o-60],[80,o-80],[80,o-100],[100,o-100],[120,o-100],[120,o-115],[120,o-80],[120,o-60],[120,o-40],[120,o-20],[140,o-20],[160,o-20],[180,o-20],[200,o-20],[160,o-110],[175,o-110],[190,o-110],[190,o-95],[190,o-80],[175,o-80],[160,o-80],[160,o-65],[160,o-50],[175,o-50],[190,o-50],[160,o-150],[160,o-175],[160,o-200],[160,o-222.5],[175,o-150],[190,o-150],[180,o-200],[200,o-200],[145,o-200],[130,o-200],[130,o-220],[130,o-180],[130,o-160],[110,o-160],[90,o-160],[90,o-180],[90,o-200],[90,o-220],[60,o-220],[60,o-200],[60,o-180],[60,o-160],[40,o-160],[20,o-160],[20,o-180],[20,o-200],[20,o-220],[s-20,o-40],[s-20,o-60],[s-20,o-80],[s-20,o-100],[s-20,o-115],[s-20,o-130],[s-40,o-130],[s-60,o-130],[s-80,o-130],[s-100,o-130],[s-120,o-130],[s-140,o-130],[s-160,o-130],[s-35,o-100],[s-50,o-100],[s-50,o-80],[s-50,o-60],[s-50,o-40],[s-50,o-20],[s-65,o-20],[s-80,o-20],[s-80,o-20],[s-80,o-40],[s-80,o-60],[s-80,o-80],[s-80,o-100],[s-100,o-100],[s-120,o-100],[s-120,o-115],[s-120,o-80],[s-120,o-60],[s-120,o-40],[s-120,o-20],[s-140,o-20],[s-160,o-20],[s-180,o-20],[s-200,o-20],[s-160,o-110],[s-175,o-110],[s-190,o-110],[s-190,o-95],[s-190,o-80],[s-175,o-80],[s-160,o-80],[s-160,o-65],[s-160,o-50],[s-175,o-50],[s-160,o-150],[s-160,o-175],[s-160,o-200],[s-160,o-222.5],[s-175,o-150],[s-190,o-150],[s-180,o-200],[s-200,o-200],[s-145,o-200],[s-130,o-200],[s-130,o-220],[s-130,o-180],[s-130,o-160],[s-110,o-160],[s-90,o-160],[s-90,o-180],[s-90,o-200],[s-90,o-220],[s-60,o-220],[s-60,o-200],[s-60,o-180],[s-60,o-160],[s-40,o-160],[s-20,o-160],[s-20,o-180],[s-20,o-200],[s-20,o-220]],K0={left:0,right:410};function J0(){const n=[];for(let i=0;i<y0.length;i++){const[r,l,h,d]=y0[i];n.push(new V({position:{x:r,y:l},width:h,height:d}))}return n.push(new n0({position:{x:200,y:213},width:20,height:5})),n}function Q0(){const n=[];for(let i=0;i<u0.length;i++){const[r,l]=u0[i];n.push(new N({position:{x:r,y:l}}))}for(let i=0;i<f0.length;i++){const[r,l]=f0[i];n.push(new R({position:{x:r,y:l}}))}return n}function z0(){const n=[],i=["red","pink","cyan","orange"];for(let p=0;p<4;p++){const u=(19+p)*10+5,y=240+10/2;p===0?n.push(new l0({spawnPosition:{x:u,y},position:{x:u,y},color:i[p],size:7.5})):p===1?n.push(new s0({spawnPosition:{x:u,y},position:{x:u,y},color:i[p],size:7.5,scatterTarget:{x:40,y:2}})):p===2?n.push(new o0({spawnPosition:{x:u,y},position:{x:u,y},color:i[p],size:7.5,scatterTarget:{x:40,y:45}})):p===3&&n.push(new i0({spawnPosition:{x:u,y},position:{x:u,y},color:i[p],size:7.5,scatterTarget:{x:2,y:45}}))}return n}function U0(){return new a0({position:{x:210,y:270},velocity:{x:0,y:0}})}const Z0={x:210,y:270},tt=[{x:190,y:50},{x:230,y:420}],g0=[[0,0,560,10],[0,0,10,300],[0,320,10,300],[0,610,560,10],[550,0,10,300],[550,320,10,300],[30,30,170,10],[220,30,50,10],[190,30,10,280],[220,30,10,40],[0,60,140,10],[30,60,10,90],[60,60,10,210],[160,60,10,160],[220,60,50,10],[260,60,10,70],[70,90,40,10],[130,90,10,130],[200,90,40,10],[90,120,40,10],[220,120,40,10],[70,150,40,10],[200,150,70,10],[30,170,40,10],[30,180,10,90],[90,180,40,10],[70,210,40,10],[70,240,100,10],[60,250,20,20],[190,240,20,70],[100,270,50,10],[170,270,20,40],[0,290,80,10],[360,30,170,10],[290,30,50,10],[360,30,10,280],[330,30,10,40],[420,60,140,10],[520,60,10,90],[490,60,10,210],[390,60,10,160],[290,60,50,10],[290,60,10,70],[450,90,40,10],[420,90,10,130],[320,90,40,10],[430,120,40,10],[300,120,40,10],[450,150,40,10],[290,150,70,10],[490,170,40,10],[520,180,10,90],[430,180,40,10],[450,210,40,10],[390,240,100,10],[480,250,20,20],[350,240,20,70],[410,270,50,10],[370,270,20,40],[480,290,80,10],[100,300,50,20],[220,180,120,10],[220,210,120,10],[230,240,100,10],[230,240,10,30],[260,240,10,30],[290,240,10,30],[320,240,10,30],[230,290,20,40],[230,290,40,10],[310,290,20,40],[290,290,40,10],[170,330,220,20],[220,370,120,10],[220,400,120,10],[220,430,120,10],[410,300,50,20],[30,580,170,10],[220,580,50,10],[190,370,10,220],[220,550,10,40],[0,550,140,10],[30,470,10,90],[60,350,10,210],[160,400,10,160],[220,550,50,10],[260,490,10,70],[70,520,40,10],[130,400,10,130],[200,520,40,10],[90,490,40,10],[220,490,40,10],[70,460,40,10],[200,460,70,10],[30,440,40,10],[30,350,10,90],[90,430,40,10],[70,400,40,10],[70,370,100,10],[100,340,50,10],[0,320,80,10],[360,580,170,10],[290,580,50,10],[360,370,10,220],[330,550,10,40],[420,550,140,10],[520,470,10,90],[490,350,10,210],[390,400,10,160],[290,550,50,10],[290,490,10,70],[450,520,40,10],[420,400,10,130],[320,520,40,10],[430,490,40,10],[300,490,40,10],[450,460,40,10],[290,460,70,10],[490,440,40,10],[520,350,10,90],[430,430,40,10],[450,400,40,10],[390,370,100,10],[410,340,50,10],[480,320,80,10]],t=560,e=620,x0=[[20,35],[150,160],[20,80],[280,50],[t-20,35],[t-180,160],[t-20,80],[280,262.5],[20,e-35],[120,e-155],[50,e-80],[280,e-155],[t-20,e-35],[t-120,e-155],[t-50,e-80]],m0=[[20,20],[50,20],[80,20],[115,20],[150,20],[180,20],[210,20],[245,20],[240,50],[260,50],[210,40],[210,60],[210,80],[230,80],[250,80],[250,95],[250,110],[250,110],[230,110],[210,110],[210,125],[210,140],[233.5,140],[256.5,140],[256.5,170],[233.5,170],[210,170],[210,185],[210,200],[210,215],[210,230],[233.5,200],[256.5,200],[233.5,230],[256.5,230],[20,50],[50,50],[80,50],[115,50],[150,50],[180,50],[150,65],[150,80],[150,100],[150,120],[150,140],[150,180],[150,200],[150,215],[135,80],[120,80],[100,80],[80,80],[120,95],[120,110],[100,110],[80,110],[80,140],[100,140],[120,140],[120,155],[120,170],[100,170],[80,170],[80,185],[80,200],[100,200],[120,200],[120,215],[180,65],[180,80],[180,100],[180,120],[180,140],[180,160],[180,180],[180,200],[180,215],[180,230],[180,245],[180,260],[160,260],[140,260],[125,260],[110,260],[90,260],[90,275],[70,280],[50,280],[50,260],[50,240],[50,220],[50,205],[50,190],[35,280],[20,280],[20,260],[20,240],[20,220],[20,200],[20,180],[20,160],[20,140],[20,120],[20,100],[35,160],[50,160],[50,140],[50,120],[50,100],[50,80],[165,230],[150,230],[135,230],[120,230],[100,230],[80,230],[90,290],[110,290],[125,290],[140,290],[160,290],[160,275],[280,20],[280,35],[280,65],[280,80],[280,100],[280,120],[280,140],[280,155],[280,170],[280,200],[280,230],[t-20,20],[t-50,20],[t-80,20],[t-115,20],[t-150,20],[t-180,20],[t-210,20],[t-245,20],[t-240,50],[t-260,50],[t-210,40],[t-210,60],[t-210,80],[t-230,80],[t-250,80],[t-250,95],[t-250,110],[t-250,110],[t-230,110],[t-210,110],[t-210,125],[t-210,140],[t-233.5,140],[t-256.5,140],[t-256.5,170],[t-233.5,170],[t-210,170],[t-210,185],[t-210,200],[t-210,215],[t-210,230],[t-233.5,200],[t-256.5,200],[t-233.5,230],[t-256.5,230],[t-20,50],[t-50,50],[t-80,50],[t-115,50],[t-150,50],[t-180,50],[t-150,65],[t-150,80],[t-150,100],[t-150,120],[t-150,140],[t-150,160],[t-150,180],[t-150,200],[t-150,215],[t-135,80],[t-120,80],[t-100,80],[t-80,80],[t-120,95],[t-120,110],[t-100,110],[t-80,110],[t-80,125],[t-80,140],[t-100,140],[t-120,140],[t-120,155],[t-120,170],[t-100,170],[t-80,170],[t-80,185],[t-80,200],[t-100,200],[t-120,200],[t-120,215],[t-180,65],[t-180,80],[t-180,100],[t-180,120],[t-180,140],[t-180,180],[t-180,200],[t-180,215],[t-180,230],[t-180,245],[t-180,260],[t-160,260],[t-140,260],[t-125,260],[t-110,260],[t-90,260],[t-90,275],[t-70,280],[t-50,280],[t-50,260],[t-50,240],[t-50,220],[t-50,205],[t-50,190],[t-35,280],[t-20,280],[t-20,260],[t-20,240],[t-20,220],[t-20,200],[t-20,180],[t-20,160],[t-20,140],[t-20,120],[t-20,100],[t-35,160],[t-50,160],[t-50,140],[t-50,120],[t-50,100],[t-165,230],[t-150,230],[t-135,230],[t-120,230],[t-100,230],[t-80,230],[t-90,290],[t-110,290],[t-125,290],[t-140,290],[t-160,290],[t-160,275],[10,310],[30,310],[50,310],[70,310],[90,310],[160,310],[180,320],[200,320],[220,320],[220,300],[220,280],[220,262.5],[220,245],[250,280],[250,262.5],[195,360],[210,360],[210,375],[230,360],[255,360],[280,280],[280,360],[t-10,310],[t-30,310],[t-50,310],[t-70,310],[t-90,310],[t-160,310],[t-180,320],[t-200,320],[t-220,320],[t-220,300],[t-220,280],[t-220,262.5],[t-220,245],[t-250,280],[t-250,262.5],[t-195,360],[t-210,360],[t-210,375],[t-230,360],[t-255,360],[20,e-20],[50,e-20],[80,e-20],[115,e-20],[150,e-20],[180,e-20],[210,e-20],[245,e-20],[240,e-50],[260,e-50],[210,e-40],[210,e-60],[210,e-80],[230,e-80],[250,e-80],[250,e-95],[250,e-110],[250,e-110],[230,e-110],[210,e-110],[210,e-125],[210,e-140],[233.5,e-140],[256.5,e-140],[256.5,e-170],[233.5,e-170],[210,e-170],[210,e-185],[210,e-200],[210,e-215],[210,e-230],[233.5,e-200],[256.5,e-200],[233.5,e-230],[256.5,e-230],[20,e-50],[50,e-50],[80,e-50],[115,e-50],[150,e-50],[180,e-50],[150,e-65],[150,e-80],[150,e-100],[150,e-120],[150,e-140],[150,e-160],[150,e-180],[150,e-200],[150,e-215],[135,e-80],[120,e-80],[100,e-80],[80,e-80],[120,e-95],[120,e-110],[100,e-110],[80,e-110],[80,e-125],[80,e-140],[100,e-140],[120,e-140],[120,e-170],[100,e-170],[80,e-170],[80,e-185],[80,e-200],[100,e-200],[120,e-200],[120,e-215],[180,e-65],[180,e-80],[180,e-100],[180,e-120],[180,e-140],[180,e-160],[180,e-180],[180,e-200],[180,e-215],[180,e-230],[180,e-245],[180,e-260],[160,e-260],[140,e-260],[120,e-260],[100,e-260],[80,e-260],[80,e-275],[65,e-280],[50,e-280],[50,e-260],[50,e-240],[50,e-220],[50,e-205],[35,e-280],[20,e-280],[20,e-260],[20,e-240],[20,e-220],[20,e-200],[20,e-180],[20,e-160],[20,e-140],[20,e-120],[20,e-100],[20,e-80],[35,e-160],[50,e-160],[50,e-140],[50,e-120],[50,e-100],[165,e-230],[150,e-230],[135,e-230],[120,e-230],[100,e-230],[80,e-230],[90,e-290],[110,e-290],[125,e-290],[140,e-290],[160,e-290],[160,e-275],[280,e-20],[280,e-35],[280,e-65],[280,e-80],[280,e-100],[280,e-120],[280,e-140],[280,e-170],[280,e-200],[t-20,e-20],[t-50,e-20],[t-80,e-20],[t-115,e-20],[t-150,e-20],[t-180,e-20],[t-210,e-20],[t-245,e-20],[t-240,e-50],[t-260,e-50],[t-210,e-40],[t-210,e-60],[t-210,e-80],[t-230,e-80],[t-250,e-80],[t-250,e-95],[t-250,e-110],[t-250,e-110],[t-230,e-110],[t-210,e-110],[t-210,e-125],[t-210,e-140],[t-233.5,e-140],[t-256.5,e-140],[t-256.5,e-170],[t-233.5,e-170],[t-210,e-170],[t-210,e-185],[t-210,e-200],[t-210,e-215],[t-210,e-230],[t-233.5,e-200],[t-256.5,e-200],[t-233.5,e-230],[t-256.5,e-230],[t-20,e-50],[t-50,e-50],[t-80,e-50],[t-115,e-50],[t-150,e-50],[t-180,e-50],[t-150,e-65],[t-150,e-80],[t-150,e-100],[t-150,e-120],[t-150,e-140],[t-150,e-160],[t-150,e-180],[t-150,e-200],[t-150,e-215],[t-135,e-80],[t-120,e-80],[t-100,e-80],[t-80,e-80],[t-120,e-95],[t-120,e-110],[t-100,e-110],[t-80,e-110],[t-80,e-125],[t-80,e-140],[t-100,e-140],[t-120,e-140],[t-120,e-170],[t-100,e-170],[t-80,e-170],[t-80,e-185],[t-80,e-200],[t-100,e-200],[t-120,e-200],[t-120,e-215],[t-180,e-65],[t-180,e-80],[t-180,e-100],[t-180,e-120],[t-180,e-140],[t-180,e-160],[t-180,e-180],[t-180,e-200],[t-180,e-215],[t-180,e-230],[t-180,e-245],[t-180,e-260],[t-160,e-260],[t-140,e-260],[t-120,e-260],[t-100,e-260],[t-80,e-260],[t-80,e-275],[t-65,e-280],[t-50,e-280],[t-50,e-260],[t-50,e-240],[t-50,e-220],[t-50,e-205],[t-50,e-190],[t-35,e-280],[t-20,e-280],[t-20,e-260],[t-20,e-240],[t-20,e-220],[t-20,e-200],[t-20,e-180],[t-20,e-160],[t-20,e-140],[t-20,e-120],[t-20,e-100],[t-20,e-80],[t-35,e-160],[t-50,e-160],[t-50,e-140],[t-50,e-120],[t-50,e-100],[t-165,e-230],[t-150,e-230],[t-135,e-230],[t-120,e-230],[t-100,e-230],[t-80,e-230],[t-90,e-290],[t-110,e-290],[t-125,e-290],[t-140,e-290],[t-160,e-290],[t-160,e-275]],et={left:0,right:550};function it(){const n=[];for(let i=0;i<g0.length;i++){const[r,l,h,d]=g0[i];n.push(new V({position:{x:r,y:l},width:h,height:d}))}return n.push(new n0({position:{x:270,y:292},width:20,height:5})),n}function st(){const n=[];for(let i=0;i<x0.length;i++){const[r,l]=x0[i];n.push(new N({position:{x:r,y:l}}))}for(let i=0;i<m0.length;i++){const[r,l]=m0[i];n.push(new R({position:{x:r,y:l}}))}return n}function k0(){const n=[],i=["red","pink","cyan","orange"];for(let l=0;l<4;l++){const h=262.5+12.5*l,d=325;l===0?n.push(new l0({spawnPosition:{x:h,y:d},position:{x:h,y:d},color:i[l],size:7.5})):l===1?n.push(new s0({spawnPosition:{x:h,y:d},position:{x:h,y:d},color:i[l],size:7.5,scatterTarget:{x:54,y:1}})):l===2?n.push(new o0({spawnPosition:{x:285,y:325},position:{x:285,y:325},color:i[l],size:7.5,scatterTarget:{x:54,y:60}})):l===3&&n.push(new i0({spawnPosition:{x:h,y:d},position:{x:h,y:d},color:i[l],size:7.5,scatterTarget:{x:1,y:60}}))}return n}function ot(){return new a0({position:{x:280,y:570},velocity:{x:0,y:0}})}const nt={x:280,y:570},lt=[{x:80,y:125},{x:510,y:80},{x:50,y:430},{x:280,y:390}];class a0{constructor({position:i,velocity:r}){this.position=i,this.velocity=r,this.radius=6,this.direction="neutral",this.mouthAngle=0,this.mouthRate=.05}draw(i,r,l){i.beginPath();let h=this.position.x,d=this.position.y;i.arc(h,d,this.radius,r,l),i.lineTo(h,d),this.direction=="neutral"&&i.arc(h,d,this.radius,0,Math.PI*2),i.fillStyle="yellow",i.fill(),i.closePath()}update(i,r,l,h){(this.mouthAngle>Math.PI/4||this.mouthAngle<0)&&(this.mouthRate=-this.mouthRate),this.mouthAngle+=this.mouthRate,this.direction=="up"?this.draw(i,3*Math.PI/2+this.mouthAngle,2*Math.PI+3*Math.PI/2-this.mouthAngle):this.direction=="left"?this.draw(i,Math.PI+this.mouthAngle,2*Math.PI+Math.PI-this.mouthAngle):this.direction=="down"?this.draw(i,Math.PI/2+this.mouthAngle,2*Math.PI+Math.PI/2-this.mouthAngle):this.direction=="right"?this.draw(i,this.mouthAngle,2*Math.PI-this.mouthAngle):this.draw(i,0,Math.PI*2),l&&(this.velocity.x=0,this.velocity.y=0);const d=A0(T);d&&(this.position.x<=d.left?this.position.x=d.right+10:this.position.x>=d.right+10&&(this.position.x=d.left)),h?(this.position.x+=this.velocity.x*1.5,this.position.y+=this.velocity.y*1.5):(this.position.x+=this.velocity.x,this.position.y+=this.velocity.y)}}function rt(){C(),console.log("Respawning in 3 seconds..."),setTimeout(()=>{switch(T){case 1:c.position={...N0},m.length=0,m.push(...r0());break;case 2:c.position={...Z0},m.length=0,m.push(...z0());break;case 3:c.position={...nt},m.length=0,m.push(...k0());break;default:console.error("Invalid level:",T);return}c.velocity={x:0,y:0},$()},3e3)}function w0(){const n=document.createElement("div");n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.width="100%",n.style.height="100%",n.style.backgroundColor="rgba(255, 0, 0, 0.5)",n.style.zIndex="999",n.style.pointerEvents="none",document.body.appendChild(n),setTimeout(()=>{document.body.removeChild(n)},300)}const at="/p109/assets/pac_man_you_win-knjCyV2H.PNG",P=document.getElementById("gameCanvas")||document.querySelector("canvas"),v=P.getContext("2d"),ht=document.getElementById("pacmanRoot"),I0=ht?.getBoundingClientRect();P.width=I0?.width||innerWidth;P.height=I0?.height||Math.max(innerHeight*.75,640);let D=null,c=null,A=0,K=0,I=[],g=[],k=[],m=[],T=1,L=3,ct=.5,H=100,Y=0,B=!1;const dt={1:[V0],2:tt,3:lt};let O=!1;function C0(n){A+=n}function E0(){K++}function D0(n){D=n}function C(){D&&(cancelAnimationFrame(D),D=null)}function $(){D=requestAnimationFrame($),v.clearRect(0,0,P.width,P.height),I.forEach(n=>n.draw(v)),c.update(v,P,W0(),O),m.forEach(n=>{typeof n.update=="function"&&n.update(),n.draw(v,c)}),G0();for(let n=0;n<g.length;n++)g[n].draw(v),g[n].checkCollision(c)&&(g[n]instanceof N&&(K=0,m.forEach(i=>i.turnFrightened()),O=!0,setTimeout(()=>{O=!1},7e3)),A+=g[n].points,g.splice(n,1),n--);!B&&g.length<=Y*ct&&(pt(),B=!0);for(let n=k.length-1;n>=0;n--){const i=k[n];if(i.collected){k.splice(n,1);continue}i.draw(v),i.checkCollision(c)&&(A+=i.points,k.splice(n,1))}Y0(),T0(),g.length==0&&k.length===0&&(T++,console.log("level completed",T),X0(),T<=3?J(T):(document.getElementById("endScImg").src=at,e0(),console.log("Game completed!")))}function A0(n){switch(n){case 1:return j0;case 2:return K0;case 3:return et;default:return null}}function h0(){cancelAnimationFrame(D),A=0,T=1,I=P0(),g=b0(),c=M0(),m=r0(),k=[],L=3,T0(),c.update(v,P)}function J(n){switch(C(),n){case 1:I=P0(),g=b0(),Y=g.length,c=M0(),m=r0(),H=100,B=!1;break;case 2:I=J0(),g=Q0(),Y=g.length,c=U0(),m=z0(),H=300,B=!1;break;case 3:I=it(),g=st(),Y=g.length,c=ot(),m=k0(),H=500,B=!1;break;default:console.error("Invalid level:",n);return}k=[],T=n,$()}function L0(n){L+=n}function pt(){const n=dt[T],i=n[Math.floor(Math.random()*n.length)];let r;switch(T){case 1:r=15;break;case 2:r=18;break;case 3:r=20;break}k.push(new F0({position:i,despawnTime:r,points:H}))}const ft=Object.freeze(Object.defineProperty({__proto__:null,animate:$,c:v,cancelAnimation:C,canvas:P,changeLife:L0,get currentLevel(){return T},getTunnelBounds:A0,get ghosts(){return m},get ghostsEaten(){return K},incrementGhostsEaten:E0,loadLevel:J,get maze(){return I},get pellets(){return g},get player(){return c},get playerLives(){return L},resetGame:h0,get score(){return A},setAnimationId:D0,get superpelletEaten(){return O},updateScore:C0},Symbol.toStringTag,{value:"Module"})),gt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{ft as g,ut as i,gt as m};
